<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Sign Up Page</title>
        <link rel="stylesheet" href="cardPage.css">

        <style>
            input[type=text], input[type=password] {
            width: 50%;
            padding: 12px 20px;
            margin: 8px 0;
            display: inline-block;
            border: 1px solid #ccc;
            box-sizing: border-box;
            }
        </style>

    </head>
    <body>
        <h1 style="text-align: center;font-size: 40px;margin-top: 100px;">Enter a username and password below</h1>
        <div class="card" style="padding-bottom: 20px;padding-left: 15px;padding-right: 15px;">
            <form>
                <p style="margin-bottom: 5px;font-size: 20px;">Username</p>
                <input type="text" placeholder="Enter Username" name="uname" id="uname" required style="margin-top: 0px;width: 100%;border-radius: 4px;"> <br>

                <p style="margin-bottom: 5px;font-size: 20px;">Password</p>
                <input type="password" placeholder="Enter Password" name="pswd" id="pswd" required style="margin-top: 0px;width: 100%;border-radius: 4px;"> <br>

                <!-- <input type="submit" value="Sign Up" style="padding: 10px;width: 100%;margin-top: 15px;margin-bottom: 20px;" class="baseButton"> -->
                <button style="padding: 10px;width: 100%;margin-top: 15px;margin-bottom: 20px;" type="button" class="baseButton" onclick="insertUser()">Sign Up</button>
                <a href="loginPage.html" style="color: black;">Login</a><br>
                <a href="homePage.html" style="color: black;">Continue as Guest</a>

                <script>
                    async function insertUser() {
                        const response = await fetch(`http://localhost:8080/users/`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                "username": document.getElementById('uname').value,
                                "password": document.getElementById('pswd').value
                            })
                        })

                        if (response.ok){
                            alert("Successfully created account!")
                            window.location.href = "loginPage.html"
                        } else {
                            alert("Registration failed. A user by this username already exists!")
                        }
                    }
                </script>
            </form>
        </div>
    </body>
</html>
